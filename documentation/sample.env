# MistHelper Configuration Template
# Copy this file to .env and fill in your values

# =============================================================================
# MIST API CONFIGURATION (Required)
# =============================================================================

# Your Mist API token (get from https://manage.mist.com/admin/apitoken)
# This is required for all API operations
MIST_APITOKEN=your_api_token_here

# Alternative authentication (use either token OR username/password)
# MIST_USERNAME=your_username@example.com
# MIST_PASSWORD=your_password

# Organization ID (optional - will prompt if not provided)
# You can find this in the Mist dashboard URL or use menu option 1
org_id=your_organization_id_here

# =============================================================================
# API CONNECTION SETTINGS
# =============================================================================

# Mist API host (default: api.mist.com)
MIST_HOST=api.mist.com
HOST=api.mist.com

# API request limits and throttling
MAX_API_CALLS_PER_HOUR=5000
API_REQUEST_LIMIT=1000
limit=1000

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Default output format: csv or sqlite
OUTPUT_FORMAT=csv

# CSV file freshness check (minutes)
# Files older than this will be regenerated
CSV_FRESHNESS_MINUTES=15

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Console logging level (10=DEBUG, 20=INFO, 30=WARNING, 40=ERROR)
CONSOLE_LOG_LEVEL=20

# File logging level (10=DEBUG, 20=INFO, 30=WARNING, 40=ERROR)
LOGGING_LOG_LEVEL=20

# Enable debug mode for detailed API logging
# MIST_DEBUG=1

# =============================================================================
# SSH CONFIGURATION (Optional - for SSH command runner options 97-98)
# =============================================================================

# SSH connection settings for device command execution
# SSH_USER=your_ssh_username
# SSH_PASSWORD=your_ssh_password
# SSH_HOST=192.168.1.1,192.168.1.2
# SSH_COMMANDS=show version,show interface brief

# =============================================================================
# FAST MODE CONFIGURATION (Optional)
# =============================================================================

# Fast mode settings for option 16 (Gateway Synthetic Tests) and other operations
# Maximum number of retry attempts per device in fast mode
FAST_MODE_MAX_RETRIES=3

# Base delay in seconds between retry attempts
FAST_MODE_RETRY_DELAY=0.75

# Exponential backoff multiplier for retries
FAST_MODE_BACKOFF_MULTIPLIER=1.5

# Number of devices to process per thread
FAST_MODE_DEVICES_PER_THREAD=10

# Maximum number of threads to use for retrying failed devices
FAST_MODE_RETRY_THREADS=4

# Maximum retry attempts for devices that failed in the first batch
FAST_MODE_RETRY_MAX_RETRIES=3

# Maximum retry attempts in sequential (non-fast) mode
FAST_MODE_SEQUENTIAL_MAX_RETRIES=1

# Fallback thread count if CPU count cannot be determined
FAST_MODE_FALLBACK_THREADS=10

# Maximum concurrent API connections to avoid pool saturation
FAST_MODE_MAX_CONCURRENT_CONNECTIONS=10

# Use connection-aware threading instead of CPU-based threading
FAST_MODE_USE_CONNECTION_AWARE_THREADING=true

# =============================================================================
# ADDRESS COMPARISON CONFIGURATION (Optional)
# =============================================================================

# Minimum percentage match required for addresses to be considered matching
# Addresses with similarity below this threshold will be flagged as mismatches
ADDRESS_MATCH_THRESHOLD=75

# Enable external address validation using Nominatim (OpenStreetMap) API
# When enabled, both address sets will be validated against external geocoding
# IMPORTANT: Respects Nominatim rate limit - adds time per mismatch
ENABLE_ADDRESS_VALIDATION=false

# Address validation timeout in seconds
ADDRESS_VALIDATION_TIMEOUT=5

# =============================================================================
# UV PACKAGE MANAGER CONFIGURATION (Optional)
# =============================================================================

# Enable automatic UV package manager updates
AUTO_UPGRADE_UV=false

# Enable automatic dependency updates
AUTO_UPGRADE_DEPENDENCIES=true

# Timeout for upgrade operations in seconds
UPGRADE_CHECK_TIMEOUT=30

# Hours between UV package manager update checks
# Set to 0 to check on every run, higher values reduce startup time
UV_UPDATE_CHECK_HOURS=24

# =============================================================================
# ADVANCED SETTINGS (Optional)
# =============================================================================

# Custom database path (default: data/mist_data.db)
# DATABASE_PATH=data/mist_data.db

# Custom CSV output directory (default: data/ subdirectory)
# CSV_OUTPUT_DIR=data/

# Rate limiting delay between API calls (seconds)
# API_DELAY_SECONDS=0.75

# Maximum retries for failed API calls
# MAX_RETRIES=3

# API page size limit (1-1000, default: 1000)
MIST_PAGE_LIMIT=1000

# =============================================================================
# NETWORK CONFIGURATION (Optional)
# =============================================================================

# HTTP proxy settings (if behind corporate proxy)
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=https://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1

# Custom SSL certificate path (if required)
# SSL_CERT_PATH=/path/to/cert.pem

# =============================================================================
# CONTAINER SETTINGS (Optional)
# =============================================================================

# Container-specific settings
# CONTAINER_TIMEZONE=UTC
# CONTAINER_USER=misthelper

# SSL and HTTPS Configuration for containers
PYTHONHTTPSVERIFY=0
SSL_VERIFY=false
REQUESTS_CA_BUNDLE=
CURL_CA_BUNDLE=

# Package Management Configuration for containers
DISABLE_UV_CHECK=true
DISABLE_AUTO_INSTALL=true

# Python Path Configuration for containers
PYTHONPATH=/app

# Container Networking Configuration
MISTHELPER_NETWORK_NAME=misthelper-net
MISTHELPER_NETWORK_SUBNET=10.89.0.0/24
MISTHELPER_NETWORK_DRIVER=bridge

# Container Engine Configuration
# Override automatic detection: podman, docker, or auto
MISTHELPER_CONTAINER_ENGINE=auto

# =============================================================================
# SSH SERVER CONFIGURATION (Required for --ssh mode)
# =============================================================================

# SSH server credentials for container remote access
# These are REQUIRED when using: python run-misthelper.py --ssh
# SECURITY: Use strong passwords and never commit real credentials
MISTHELPER_SSH_USERNAME=your_ssh_username
MISTHELPER_SSH_PASSWORD=your_strong_password_here

# =============================================================================
# CONTAINER IMAGE AND RUNTIME CONFIGURATION (Advanced)
# =============================================================================

# Container image and names (typically no need to change)
MISTHELPER_IMAGE_NAME=misthelper
MISTHELPER_MAIN_CONTAINER_NAME=misthelper-main
MISTHELPER_SSH_CONTAINER_NAME=misthelper-ssh

# SSH server port (change if 2200 conflicts with other services)
MISTHELPER_SSH_PORT=2200

# Container startup scripts (typically no need to change)
MISTHELPER_SSH_START_SCRIPT=/start.sh
MISTHELPER_MAIN_SCRIPT=MistHelper.py

# Local file paths (change if using different directory structure)
MISTHELPER_DATA_DIR=data
MISTHELPER_SCRIPT_LOG=script.log
MISTHELPER_ENV_FILE=.env

# Container mount paths (typically no need to change unless custom container)
MISTHELPER_CONTAINER_DATA_PATH=/app/data
MISTHELPER_CONTAINER_ENV_PATH=/app/.env
MISTHELPER_CONTAINER_LOG_PATH=/app/script.log

# =============================================================================
# USAGE NOTES
# =============================================================================

# 1. Copy this file to .env: cp sample.env .env
# 2. Fill in your MIST_APITOKEN (required)
# 3. Optionally set org_id to skip organization selection
# 4. Adjust logging levels and output format as needed
# 5. Keep .env file secure and never commit it to version control

# =============================================================================
# GETTING STARTED
# =============================================================================

# 1. Get your API token:
#    - Login to https://manage.mist.com
#    - Go to Organization â†’ API Tokens
#    - Create a new token with appropriate permissions
#    - Copy the token to MIST_APITOKEN above

# 2. Find your organization ID:
#    - Run: python MistHelper.py --menu 1
#    - Or check the URL in Mist dashboard
#    - Copy the org ID to org_id above

# 3. Test your configuration:
#    - Run: python MistHelper.py --help
#    - Run: python MistHelper.py --menu 1

# 4. For SSH server mode (optional):
#    - Set MISTHELPER_SSH_USERNAME and MISTHELPER_SSH_PASSWORD
#    - Run: python run-misthelper.py --ssh
#    - Connect: ssh -p 2200 username@localhost

# 5. For container customization (optional):
#    - Adjust MISTHELPER_NETWORK_* settings for custom networking
#    - Modify SSL settings if behind corporate proxy/firewall
#    - Set MISTHELPER_CONTAINER_ENGINE to force podman or docker

# =============================================================================
# SECURITY NOTES
# =============================================================================

# - Never commit .env files to version control
# - Use restrictive file permissions: chmod 600 .env
# - Rotate API tokens regularly
# - Use dedicated API tokens for automation
# - Consider using environment variables in production